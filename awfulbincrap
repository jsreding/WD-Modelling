# [2150, 7179, 8100, 9149, 9974, 10842, 11852, 13080, 14244, 15304, 16438, 18240, 20224, 22997, 27292, 37222, 120000]
# [2150, 8100, 9974, 11852, 14244, 16438, 20224, 27292, 120000]

sphist, spbins = np.histogram(sp_temps, [2150, 7179, 8100, 9149, 9974, 10842, 11852, 13080, 14244, 15304, 16438, 18240, 20224, 22997, 27292, 37222, 120000])
unhist, unbins = np.histogram(un_temps, [2150, 7179, 8100, 9149, 9974, 10842, 11852, 13080, 14244, 15304, 16438, 18240, 20224, 22997, 27292, 37222, 120000])
print(len(sphist), len(unhist))

spfrac = np.zeros(len(sphist))
unfrac = np.zeros(len(unhist))
frac = np.zeros(len(sphist))
for b in range(len(sphist)):
    frac[b] = sphist[b]/unhist[b]
    spfrac[b] = sphist[b]/len(sp_temps)
    unfrac[b] = unhist[b]/len(un_temps)

print(spfrac)

plt.figure()
plt.minorticks_on()
ax = plt.gca()
plt.title("K2 White Dwarf Spot Fraction by 100 WD Temperature Bin", fontsize=24)
plt.ylabel("Spotted WD Fraction (%)", fontsize=18)
plt.xlabel("$T_{eff}$ (K)", fontsize=18)
# plt.xscale('log')
plt.bar([2150, 7179, 8100, 9149, 9974, 10842, 11852, 13080, 14244, 15304, 16438, 18240, 20224, 22997, 27292, 37222], spfrac*100, align='edge', width=[7179-2151, 8100-7179, 9149-8100, 9974-9149, 10842-9974, 11852-10842, 13080-11852, 14244-13080, 15304-14244, 16438-15304, 18240-16438, 20224-18240, 22997-20224, 27292-22997, 37222-27292, 120000-37222], alpha=0.33, label='Fraction of total Spotted')
plt.bar([2150, 7179, 8100, 9149, 9974, 10842, 11852, 13080, 14244, 15304, 16438, 18240, 20224, 22997, 27292, 37222], unfrac*100, align='edge', width=[7179-2151, 8100-7179, 9149-8100, 9974-9149, 10842-9974, 11852-10842, 13080-11852, 14244-13080, 15304-14244, 16438-15304, 18240-16438, 20224-18240, 22997-20224, 27292-22997, 37222-27292, 120000-37222], alpha=0.33, label='Fraction of total Unspotted')
plt.bar([2150, 7179, 8100, 9149, 9974, 10842, 11852, 13080, 14244, 15304, 16438, 18240, 20224, 22997, 27292, 37222], frac*100, align='edge', width=[7179-2151, 8100-7179, 9149-8100, 9974-9149, 10842-9974, 11852-10842, 13080-11852, 14244-13080, 15304-14244, 16438-15304, 18240-16438, 20224-18240, 22997-20224, 27292-22997, 37222-27292, 120000-37222], alpha=0.33, label='Fraction Spotted in Bin')
# [8100-2151, 9974-8100, 11852-9974, 14243-11852, 16473-14244, 20223-16438, 27292-20224, 120000-27292]
# [7179-2151, 8100-7179, 9149-8100, 9974-9149, 10842-9974, 11852-10842, 13080-11852, 14244-13080, 15304-14244, 16438-15304, 18240-16438, 20224-18240, 22997-20224, 27292-22997, 37222-27292, 120000-37222]
plt.tick_params(axis='x', which='minor')
ax.xaxis.set_major_formatter(FormatStrFormatter("%.0f"))
plt.tick_params(axis='both', which='major', labelsize=18)
plt.xticks([2151, 7179, 8100, 9149, 9974, 10842, 11852, 13080, 14244, 15304, 16438, 18240, 20224, 22997, 27292, 37222])
plt.legend(fontsize=18)
plt.show()
